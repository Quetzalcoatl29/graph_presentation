<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Labs</title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <script src="/resources/sigma-min/sigma.min.js"></script>

    <style>
        #graph-container {
          max-width: 100%;
          height: 400px;
          margin: auto;
          border-style: solid;
          border-color: red;
        }

        #control {
          padding: 1.5rem;
          margin-right: 0;
          margin-left: 0;
          border-width: .2rem;
        }
    </style>
  </head>
  <body>
    <div id="container">
      <div class="row">
        <div class="col-md-4">
          <div id="control">
            <div class="form-row">
              <div class="form-group">
                <label for="num-nodes">Nodes Length</label>
                <input type="number" class="form-control" id="num-nodes" value="10">
              </div>
              <div class="form-group">
                <label for="num-edges">Edges Probability</label>
                <input type="number" class="form-control" id="pro-edges" value="0.8">
              </div>
              <div class="form-group">
                <button class="btn btn-primary" id="btn-load">Load</button>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-8">
          <div id="graph-container"></div>
        </div>
      </div>
    </div>
  </body>

  <script>
    $("#btn-load").click(function(){
      num_nodes = $("#num-nodes").val();
      pro_edges = $("#pro-edges").val();

      load_graph(num_nodes, pro_edges);
    });

    function load_graph(num_nodes, pro_edges) {
      $.ajax({
          method: "POST",
          url: "http://127.0.0.1:5000/graph/create",
          dataType: "json",
          contentType: "application/json; charset=utf-8",
          data: JSON.stringify({ "num_nodes": 10, "probability_edges": 0.75 })
      })
      .done(function( dataGraph ) {
        console.log( "Done!" );
        console.log( dataGraph );

        s = new sigma({
          graph: dataGraph,
          container: 'graph-container'
        });
      })
      .fail(function( jqXHR, textStatus ) {
        alert( "Request failed: " + textStatus );
      });
    }


  </script>
</html>
